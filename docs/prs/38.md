# PR Description - Issue #38

Issue: #38 - Implement minimal VS Code extension to launch dap-adapter  
Branch: codex/38-implement-minimal-vs-code-extension-to-launch-dap-adapter  
Plan reference: /Users/stefan/work/lsp-dap/docs/plans/ride-protocol.md (sections 9, 10)

## Summary

This change adds a minimal VS Code extension surface for running the Go `dap-adapter` in real debug sessions.

It introduces a debugger contribution (`dyalog-dap`) with launch/attach schema, a runtime descriptor factory that launches the adapter executable, and repository-level docs/tests so the workflow is usable and regression-protected.

## Why this change

The adapter runtime was already implemented, but users still needed manual DAP wiring. This issue bridges that gap by adding a concrete VS Code debug type and executable launch resolution path.

## Scope of changes

Files changed:

- `/Users/stefan/work/lsp-dap/vscode-extension/package.json`
- `/Users/stefan/work/lsp-dap/vscode-extension/out/extension.js`
- `/Users/stefan/work/lsp-dap/scaffold_test.go`
- `/Users/stefan/work/lsp-dap/README.md`

### `vscode-extension/package.json`

Added minimal extension manifest:

- extension metadata (`name`, `displayName`, `engines.vscode`, `main`)
- activation event: `onDebug:dyalog-dap`
- debugger contribution:
  - `type: dyalog-dap`
  - launch/attach configuration attributes
  - configuration snippet for quick setup

### `vscode-extension/out/extension.js`

Added runtime extension entrypoint:

- debug configuration provider for default scaffold values
- debug adapter descriptor factory launching `dap-adapter` executable
- adapter path resolution strategy:
  - explicit `launch.json` `adapterPath`
  - `DYALOG_DAP_ADAPTER_PATH`
  - workspace fallbacks (`dap-adapter`, `bin/dap-adapter`, `dist/dap-adapter`)
- adapter env forwarding (`adapterEnv`) and `rideAddr` env fallback

### `scaffold_test.go`

Added regression tests:

- `TestScaffold_HasVSCodeExtensionDebuggerContribution`
- `TestScaffold_HasVSCodeExtensionEntrypoint`

These enforce presence and baseline correctness of extension contribution files.

### `README.md`

Updated docs with:

- current status reflecting bundled extension source
- bundled extension usage flow
- `dyalog-dap` launch configuration example
- clearer limitation wording (source present, no published VSIX yet)

## Test coverage

Added structural regression checks for extension packaging/contribution files in the existing scaffold test suite.

## Validation performed

Commands run:

- `go test ./... -count=1`
- `go vet ./...`

Result:

- all tests pass
- vet clean

## Compatibility and risk

Behavior changes:

- repository now contains a first-party VS Code debug type configuration path (`dyalog-dap`)
- users can run adapter-backed sessions without hand-rolling descriptor plumbing

Risks:

- extension is intentionally minimal and not yet marketplace-packaged
- adapter executable discovery relies on local binary presence and launch configuration correctness

## Out of scope

Not included in this PR:

- VSIX build/publish pipeline
- advanced extension UX (status views, commands, diagnostics panel)

## Reviewer guide

Suggested review order:

1. `/Users/stefan/work/lsp-dap/vscode-extension/package.json`
2. `/Users/stefan/work/lsp-dap/vscode-extension/out/extension.js`
3. `/Users/stefan/work/lsp-dap/scaffold_test.go`
4. `/Users/stefan/work/lsp-dap/README.md`
