# PR Description - Issue #69

Issue: #69 - Refactor extension entrypoint into activation/commands/diagnostics modules  
Branch: codex/69-refactor-extension-entrypoint-activation-commands-diagnostics  
Plan reference: /Users/stefan/work/lsp-dap/docs/plans/refactor.md (Phase 1: extension entrypoint split)  
Context references: /Users/stefan/work/lsp-dap/docs/plans/refactor.md, parent phase #65, parent epic #64

## Summary

This change decomposes the VS Code extension entrypoint into focused modules for activation wiring, command implementations, debug adapter descriptor creation, and diagnostics logging/history.

## Why this change

Issue #69 addresses file-size and concern-mixing in `vscode-extension/src/extension.ts`, improving maintainability while preserving command IDs and runtime behavior.

## Scope of changes

Files changed:

- `/Users/stefan/work/lsp-dap/vscode-extension/src/extension.ts`
- `/Users/stefan/work/lsp-dap/vscode-extension/src/activation.ts`
- `/Users/stefan/work/lsp-dap/vscode-extension/src/commands/setupCommands.ts`
- `/Users/stefan/work/lsp-dap/vscode-extension/src/commands/supportCommands.ts`
- `/Users/stefan/work/lsp-dap/vscode-extension/src/debug/descriptorFactory.ts`
- `/Users/stefan/work/lsp-dap/vscode-extension/src/diagnostics/logger.ts`
- `/Users/stefan/work/lsp-dap/scaffold_extension_test.go`
- `/Users/stefan/work/lsp-dap/vscode-extension/out/extension.js`
- `/Users/stefan/work/lsp-dap/vscode-extension/out/activation.js`
- `/Users/stefan/work/lsp-dap/vscode-extension/out/commands/setupCommands.js`
- `/Users/stefan/work/lsp-dap/vscode-extension/out/commands/supportCommands.js`
- `/Users/stefan/work/lsp-dap/vscode-extension/out/debug/descriptorFactory.js`
- `/Users/stefan/work/lsp-dap/vscode-extension/out/diagnostics/logger.js`

### Activation split

- `src/activation.ts` now owns extension startup wiring and command/provider registration
- `src/extension.ts` remains entrypoint and delegates `activate`/`deactivate`

### Command extraction

- setup/validation commands moved to `src/commands/setupCommands.ts`
- support/install commands moved to `src/commands/supportCommands.ts`

### Diagnostics and debug extraction

- diagnostics history/log helpers moved to `src/diagnostics/logger.ts`
- debug adapter descriptor creation moved to `src/debug/descriptorFactory.ts`

## Validation performed

Commands run:

- `go test ./... -run '^TestScaffold_HasVSCodeExtension|^TestScaffold_HasExtension' -count=1`
- `cd vscode-extension && npm ci`
- `cd vscode-extension && npm run lint`
- `cd vscode-extension && npm test -- --runInBand`
- `cd vscode-extension && npm run build`
- `go test ./... -count=1`
- `go vet ./...`

Result:

- all checks pass

## Compatibility and risk

Behavioral impact:

- no command ID changes
- no expected user-visible behavior change in setup/diagnostics/install/debug adapter launch flows

Risk:

- low-to-moderate. Main risk is wiring regression during module moves; mitigated by scaffold, unit, and integration command tests.

## Reviewer guide

Suggested review order:

1. `/Users/stefan/work/lsp-dap/vscode-extension/src/activation.ts`
2. `/Users/stefan/work/lsp-dap/vscode-extension/src/commands/setupCommands.ts`
3. `/Users/stefan/work/lsp-dap/vscode-extension/src/commands/supportCommands.ts`
4. `/Users/stefan/work/lsp-dap/vscode-extension/src/debug/descriptorFactory.ts`
5. `/Users/stefan/work/lsp-dap/vscode-extension/src/diagnostics/logger.ts`
6. `/Users/stefan/work/lsp-dap/scaffold_extension_test.go`
