# PR Description - Issue #55

Issue: #55 - Define and implement live CI matrix for Dyalog compatibility  
Branch: codex/55-define-and-implement-live-ci-matrix-for-dyalog-compatibility  
Plan reference: /Users/stefan/work/lsp-dap/docs/plans/ride-protocol.md (validation and compatibility strategy)  
Context references: /Users/stefan/work/lsp-dap/README.md, parent epic #45

## Summary

This change introduces a documented live compatibility matrix policy, a dedicated `live-matrix` workflow across OS profiles, and a release-readiness gate that can require fresh live matrix signal before publishing releases.

## Why this change

Issue #55 required broader compatibility strategy and stronger release confidence than a single optional live job.

This implementation separates fast/slow gates, documents env/secrets strategy for self-hosted runners, and adds reliability-metrics artifacts for live matrix runs.

## Scope of changes

Files changed:

- `/Users/stefan/work/lsp-dap/.github/workflows/live-matrix.yml`
- `/Users/stefan/work/lsp-dap/.github/workflows/release.yml`
- `/Users/stefan/work/lsp-dap/docs/validations/55-live-ci-matrix.md`
- `/Users/stefan/work/lsp-dap/scaffold_test.go`
- `/Users/stefan/work/lsp-dap/README.md`

### Live matrix workflow

Added `.github/workflows/live-matrix.yml`:

- trigger: `workflow_dispatch` + weekly schedule
- matrix profiles:
  - `linux-190`
  - `macos-190`
  - `windows-190`
- self-hosted runner labels per profile
- profile-specific env resolution from repo vars
- live test execution (`TestLiveDyalog_*`, `TestLiveDAPAdapter_*`)
- reliability metrics output (`artifacts/integration/metrics/*.json`)
- artifact upload per profile (`if: always()`)
- explicit failure enforcement when enabled profile run fails

### Release readiness gate

Updated `.github/workflows/release.yml` with `release-readiness` job:

- env gate via `LIVE_MATRIX_REQUIRED`
- freshness policy via `LIVE_MATRIX_MAX_AGE_DAYS` (default 14)
- checks GitHub Actions API for recent successful `live-matrix.yml` run on `main`
- blocks release publish when required live matrix signal is missing/stale

### Policy documentation

Added `docs/validations/55-live-ci-matrix.md`:

- OS/Dyalog matrix dimensions
- fast vs slow gates
- promotion/release-readiness policy
- hosted vs self-hosted env/secrets strategy
- reliability metrics expectations

### Scaffold enforcement

Added scaffold checks for:

- matrix policy doc presence/content
- `live-matrix.yml` structural snippets
- release workflow live-matrix readiness gate snippets

## Validation performed

Commands run:

- `go test ./... -count=1`
- `go vet ./...`

Result:

- all checks pass

## Compatibility and risk

Behavioral impact:

- no runtime adapter behavior changes
- CI/release behavior is stricter when `LIVE_MATRIX_REQUIRED=1`

Risk:

- low-to-moderate operational risk if repo vars/secrets are misconfigured for self-hosted profiles; policy docs now define expected setup.

## Reviewer guide

Suggested review order:

1. `/Users/stefan/work/lsp-dap/.github/workflows/live-matrix.yml`
2. `/Users/stefan/work/lsp-dap/.github/workflows/release.yml`
3. `/Users/stefan/work/lsp-dap/docs/validations/55-live-ci-matrix.md`
4. `/Users/stefan/work/lsp-dap/scaffold_test.go`
