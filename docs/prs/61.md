# PR Description - Issue #61

Issue: #61 - Add adapter install/update workflow in VS Code extension  
Branch: codex/61-add-adapter-install-update-workflow-in-vs-code-extension  
Plan reference: /Users/stefan/work/lsp-dap/docs/plans/ride-protocol.md (user friction reduction and robust validation)  
Context references: /Users/stefan/work/lsp-dap/vscode-extension/README.md, /Users/stefan/work/lsp-dap/docs/releases/extension-vsix.md, parent epic #58

## Summary

This change adds a first-class extension command to install/update `dap-adapter` from GitHub Releases with checksum verification, and wires adapter launch fallback to the installed path.

## Why this change

New users currently need manual `go build`/path management before debugging. Issue #61 targets lower-friction onboarding and safer distribution by automating adapter retrieval and integrity checks.

## Scope of changes

Files changed:

- `/Users/stefan/work/lsp-dap/vscode-extension/src/adapterInstaller.ts`
- `/Users/stefan/work/lsp-dap/vscode-extension/src/test/adapterInstaller.test.ts`
- `/Users/stefan/work/lsp-dap/vscode-extension/src/extension.ts`
- `/Users/stefan/work/lsp-dap/vscode-extension/package.json`
- `/Users/stefan/work/lsp-dap/vscode-extension/package-lock.json`
- `/Users/stefan/work/lsp-dap/vscode-extension/README.md`
- `/Users/stefan/work/lsp-dap/README.md`
- `/Users/stefan/work/lsp-dap/scaffold_test.go`
- `/Users/stefan/work/lsp-dap/vscode-extension/out/adapterInstaller.js`
- `/Users/stefan/work/lsp-dap/vscode-extension/out/extension.js`

### Installer module

Added `adapterInstaller.ts` with:

- latest-release discovery via GitHub API
- platform/arch release asset selection (`darwin|linux|windows` + `amd64|arm64`)
- `checksums.txt` parsing and SHA-256 verification
- archive extraction (`.tar.gz` and `.zip`)
- adapter binary discovery and executable permission fix-up

### Extension command and fallback wiring

Added command:

- `dyalogDap.installAdapter` / `Dyalog DAP: Install/Update Adapter`

Behavior:

- installs archive into extension global storage (`<globalStorage>/adapter/<tag>/...`)
- stores resolved binary path in `dyalogDap.adapter.installedPath`
- launch path resolution now falls back to this installed path when `adapterPath` is omitted

### Tests and scaffold

Added unit tests for installer helpers:

- release asset selection
- checksum parsing/verification success and failure cases

Added scaffold checks for:

- install command + activation event
- installer source/test files
- README install/checksum/GitHub Releases guidance

### Documentation

Updated extension and root README with installer usage notes and checksum verification behavior.

## Validation performed

Commands run:

- `go test ./... -count=1`
- `go vet ./...`
- `cd vscode-extension && npm run lint`
- `cd vscode-extension && npm test -- --runInBand`
- `cd vscode-extension && npm run test:exthost`
- `cd vscode-extension && npm run build`
- live installer smoke:
  - `node -e "require('./vscode-extension/out/adapterInstaller.js').installAdapterFromLatestRelease(...)"` (download + checksum + extract)

Result:

- all checks pass

## Compatibility and risk

Behavioral impact:

- adds optional installer command and config fallback path
- does not change explicit `adapterPath` behavior in user launch configs

Risk:

- moderate network/distribution dependency risk (GitHub API availability, release asset naming conventions). Integrity failures fail closed with actionable errors.

## Reviewer guide

Suggested review order:

1. `/Users/stefan/work/lsp-dap/vscode-extension/src/adapterInstaller.ts`
2. `/Users/stefan/work/lsp-dap/vscode-extension/src/extension.ts`
3. `/Users/stefan/work/lsp-dap/vscode-extension/src/test/adapterInstaller.test.ts`
4. `/Users/stefan/work/lsp-dap/vscode-extension/package.json`
5. `/Users/stefan/work/lsp-dap/vscode-extension/README.md`
